/*******************************************************************************************************************************//**
 *
 * @file		PR_ADC.c
 * @brief		Descripcion del modulo
 * @date		10 dic. 2020
 * @author		R2002 - Melamed Damian
 *
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** INCLUDES
 **********************************************************************************************************************************/
#include <PR/PR_ADC.h>
#include <DR/DR_ADC.h>
/***********************************************************************************************************************************
 *** DEFINES PRIVADOS AL MODULO
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** MACROS PRIVADAS AL MODULO
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** TIPOS DE DATOS PRIVADOS AL MODULO
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** TABLAS PRIVADAS AL MODULO
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** VARIABLES GLOBALES PUBLICAS
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** VARIABLES GLOBALES PRIVADAS AL MODULO
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** PROTOTIPO DE FUNCIONES PRIVADAS AL MODULO
 **********************************************************************************************************************************/

 /***********************************************************************************************************************************
 *** FUNCIONES PRIVADAS AL MODULO
 **********************************************************************************************************************************/

 /***********************************************************************************************************************************
 *** FUNCIONES GLOBALES AL MODULO
 **********************************************************************************************************************************/
/**
	\fn  InicializarADC
	\brief Configuara el ADC e inicializa los pines
 	\author R2002 - Melamed Damian
 	\date 10 dic. 2020
*/
void InicializarADC(void){
	InicializarADC_DR();
	setPinsel(ADC_IN_1, FUNCION_3);
	setPinsel(ADC_IN_3, FUNCION_1);
	//EL PIN ADC_3 SE USA PARA UART3
}


/**
	\fn  getADC
	\brief Devuelve el valor cargado en el buffer del canal de adc correspondiente
 	\author R2002 - Melamed Damian
 	\date 10 dic. 2020
 	\param [in] canal de ADC
	\return uint32_t con el promedio del valor en el canal de ADC
*/
uint32_t getADC(uint8_t chn_n){
	return ADC_buffer[chn_n-1];
}

void ADC_run(void){
	if(ADC_ready){
		ADC_startConvertion();
		ADC_ready = 0;
	}
}

void ADC_cleanBuff(void){
	ADC_buffer[0] = 0;
	ADC_buffer[1] = 0;
}
